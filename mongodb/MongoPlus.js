const _0x4009=['modelValueCheckError','checkModelMode','$currentDate','mongodbClientInitError','mongodbOperatorValueTypeError','108673VfPKXM','isArray','find','user','$setOnInsert','sleepTime','_id','checkValueMode','completeByInsert','25808sLQrmr','errorLabels','transactionBizLogicError','Decimal128','isObject','connectName','countDocuments','origin','24jCsOCU','function','mongodbBizLogicError','transactionCallbackResultError','$pullAll','modelFull','socketTimeoutMS','findOne','isNumber','password','$mul','failToReport','completeByUpdate','insertOne','findOneAndUpdate','transaction','indexOf','dbName','name','$unset','commitTransaction','2yuVNjt','transactionAbnormalError','updateMany','upsert','success','getToConsole','getModelCols','findOneAndDelete','completeByFindAndModify','insertMany','authSource=','mongodbConnectionError','complete','toArray','626419PBbpGX','MongoClient','error','sort','$addToSet','$inc','server','UnknownTransactionCommitResult','ERROR','replicaSet','$max','updateOne','$set','$push','7EkXjJb','110760rrmNhE','1lAztGT','transactionConcurrentError','MongoDB\x20Update\x20Error:\x20Model\x20and\x20$setOnInsert,\x20$unset,\x20$rename\x20con\x27t\x20use\x20at\x20the\x20same\x20time!','string','12003tDjRgk','229533PBrUrD','session','$min','getMongoClient','replicaSet=','$pop','mongodb://','159975LKYHZw','startSession','endSession','state','result','snapshot','mongodbOperatorInfoCheckError','Long','completeByDelete','abortTransaction','poolSize','startTransaction','projection','returnOriginal','type','collection','connect','authSource','render','$pull','close','deleteMany','create','MongoDB\x20Update\x20Error:\x20All\x20Operators\x20are\x20invalid!','Int32','$rename'];const _0xbfb7=function(_0xdebe9e,_0x49df04){_0xdebe9e=_0xdebe9e-0x1bc;let _0x400979=_0x4009[_0xdebe9e];return _0x400979;};const _0x232ad3=_0xbfb7;(function(_0xdc34bc,_0x2470d5){const _0x5f1731=_0xbfb7;while(!![]){try{const _0x26a2d3=-parseInt(_0x5f1731(0x205))*-parseInt(_0x5f1731(0x1c3))+parseInt(_0x5f1731(0x20b))*-parseInt(_0x5f1731(0x1d4))+parseInt(_0x5f1731(0x20c))*-parseInt(_0x5f1731(0x1e9))+-parseInt(_0x5f1731(0x213))+parseInt(_0x5f1731(0x1cc))*parseInt(_0x5f1731(0x207))+parseInt(_0x5f1731(0x1f7))+-parseInt(_0x5f1731(0x206));if(_0x26a2d3===_0x2470d5)break;else _0xdc34bc['push'](_0xdc34bc['shift']());}catch(_0x2fcd6d){_0xdc34bc['push'](_0xdc34bc['shift']());}}}(_0x4009,0x60739));import _0x524985 from'mongodb';import _0x5126d2 from'../stateHandler/StateManager.js';import _0x499980 from'../valueHandler/TypeChecker.js';import _0x5d3dcc from'./MongoResult.js';const mongoClientBox={},MongoClient=_0x524985[_0x232ad3(0x1f8)],PK=_0x232ad3(0x1c9);function mongoURLCreater(_0x17bb0d,_0x90b4b4,_0x4095f1,_0x18aa79,_0x53f99b,_0x449133){const _0x5890ab=_0x232ad3;let _0x4e9c50=_0x4095f1&&_0x18aa79?_0x4095f1+':'+_0x18aa79+'@':'',_0x5d62bb=_0x4095f1&&_0x18aa79&&_0x53f99b?_0x5890ab(0x1f3)+_0x53f99b:'',_0x93e9b5=_0x449133?_0x5890ab(0x210)+_0x449133:'',_0x47ae97='';if(_0x5d62bb)_0x47ae97+='?'+_0x5d62bb;if(_0x93e9b5)_0x47ae97+=(_0x47ae97===''?'?':'&')+_0x93e9b5;return _0x5890ab(0x212)+_0x4e9c50+_0x17bb0d+'/'+_0x90b4b4+_0x47ae97;}function sleep(_0x7dc791){return new Promise(_0x2bb7af=>setTimeout(_0x2bb7af,_0x7dc791));}function checkOperatorInfoIsDigit(_0x5735a3,_0x171c0d=null){const _0x317d54=_0x232ad3;let _0xf4b06c=_0x171c0d?_0x171c0d[_0x317d54(0x1ef)]():null;for(let _0x595578 in checkOperatorInfoIsArray){let _0x51a823=_0x5735a3[_0x595578];if(!_0x499980[_0x317d54(0x1dc)](_0x51a823)&&!(_0x51a823 instanceof MongoPlus[_0x317d54(0x221)][_0x317d54(0x1cf)])&&!(_0x51a823 instanceof MongoPlus['type'][_0x317d54(0x21a)])&&!(_0x51a823 instanceof MongoPlus[_0x317d54(0x221)]['Int32']))return![];if(_0x171c0d){let _0x24ae7b=_0xf4b06c[_0x595578];if(_0x24ae7b[_0x317d54(0x221)]!==Number&&_0x24ae7b[_0x317d54(0x221)]!==MongoPlus[_0x317d54(0x221)][_0x317d54(0x1cf)]&&_0x24ae7b[_0x317d54(0x221)]!==MongoPlus[_0x317d54(0x221)]['Long']&&_0x24ae7b[_0x317d54(0x221)]!==MongoPlus[_0x317d54(0x221)][_0x317d54(0x1bc)])return![];}}return!![];}function checkOperatorInfoIsArray(_0x1a5118,_0xba94e7){const _0x21a9e5=_0x232ad3;let _0x4cc62e=_0xba94e7?_0xba94e7[_0x21a9e5(0x1ef)]():null;for(let _0x1cd607 in _0x1a5118){let _0x260327=_0x4cc62e[_0x1cd607];if(_0x260327[_0x21a9e5(0x221)]!==Array)return![];}return!![];}async function mongoConnect(_0x18295f,_0x2901b6,_0x35d53b){const _0x162a47=_0x232ad3;let _0x1e120e=null;if(!mongoClientBox[_0x18295f])try{mongoClientBox[_0x18295f]=await MongoClient[_0x162a47(0x223)](_0x2901b6,_0x35d53b),_0x1e120e=mongoClientBox[_0x18295f];}catch(_0x46a158){_0x5126d2['origin'][_0x162a47(0x1f4)]['getToConsole'](),_0x1e120e=null;}else _0x1e120e=mongoClientBox[_0x18295f];return _0x1e120e;}async function baseCheckAndExecute(_0x2cf0f4,_0x52e243,_0x49b876){const _0x499952=async()=>{const _0x59059a=_0xbfb7;if(_0x52e243===null)return _0x5d3dcc[_0x59059a(0x1f9)](_0x5126d2[_0x59059a(0x1d3)][_0x59059a(0x1c1)]);let _0xb85856=null,_0x24ae74=null;if(typeof _0x49b876===_0x59059a(0x20a))_0xb85856=_0x52e243['db']()['collection'](_0x49b876),_0x24ae74=![];else{if(_0x49b876[_0x59059a(0x1e6)])_0xb85856=_0x52e243['db']()[_0x59059a(0x222)](_0x49b876[_0x59059a(0x1e6)]),_0x24ae74=!![];else return _0x5d3dcc[_0x59059a(0x1f9)](_0x5126d2['origin']['mongodbModelNameError']);}return await _0x2cf0f4(_0xb85856,{'isModel':_0x24ae74});};return await _0x499952();}async function transaction(_0x3bbef8,_0x247e8c,_0x136f10){const _0x1c523c=_0x232ad3;if(_0x3bbef8===null)return _0x5d3dcc[_0x1c523c(0x1f9)](_0x5126d2[_0x1c523c(0x1d3)][_0x1c523c(0x1c1)]);if(!_0x247e8c||typeof _0x247e8c!==_0x1c523c(0x1d5))return _0x5126d2[_0x1c523c(0x1d3)][_0x1c523c(0x1ce)][_0x1c523c(0x1ee)](),_0x5d3dcc[_0x1c523c(0x1f9)](_0x5126d2[_0x1c523c(0x1d3)][_0x1c523c(0x1ce)]);let _0x5a142c=0x0;async function _0x310ba2(_0x5696c0){const _0x5d6340=_0x1c523c;try{await _0x5696c0[_0x5d6340(0x1e8)]();}catch(_0xd51d26){if(_0xd51d26[_0x5d6340(0x1cd)]&&_0xd51d26[_0x5d6340(0x1cd)][_0x5d6340(0x1e4)](_0x5d6340(0x1fe))>=0x0){_0x5126d2[_0x5d6340(0x1d3)]['transactionConcurrentError'][_0x5d6340(0x1ee)](),await sleep(_0x136f10);if(++_0x5a142c<0x5)return await _0x310ba2(_0x5696c0);else return _0x5d3dcc['error'](_0x5126d2[_0x5d6340(0x1d3)]['transactionConcurrentError']);}}}async function _0x7a1b5c(_0x35eb89){const _0x55feee=_0x1c523c;let _0x2b0a85=null;try{try{_0x2b0a85=_0x3bbef8[_0x55feee(0x214)](),_0x2b0a85[_0x55feee(0x21e)]({'readConcern':{'level':_0x55feee(0x218)},'writeConcern':{'w':'majority'},'readPreference':'primary'});}catch(_0x520131){if(_0x2b0a85)_0x2b0a85[_0x55feee(0x215)]();return _0x5126d2[_0x55feee(0x1d3)]['transactionSessionError'][_0x55feee(0x1ee)](),_0x5d3dcc[_0x55feee(0x1f9)](_0x5126d2['origin']['transactionSessionError']);}let _0x1eb4ca=null;try{_0x1eb4ca=await _0x35eb89(_0x2b0a85,_0x3bbef8);}catch(_0x23bd2c){return await _0x2b0a85[_0x55feee(0x21c)](),_0x2b0a85['endSession'](),_0x5126d2[_0x55feee(0x1d3)]['transactionBizLogicError'][_0x55feee(0x1ee)](),_0x5d3dcc[_0x55feee(0x1f9)](_0x5126d2['origin']['transactionBizLogicError']);}(_0x1eb4ca===undefined||_0x1eb4ca===null)&&_0x5126d2[_0x55feee(0x1d3)][_0x55feee(0x1d7)][_0x55feee(0x1ee)]();if(_0x1eb4ca['reply'])return await _0x2b0a85['abortTransaction'](),_0x2b0a85[_0x55feee(0x215)](),await sleep(_0x136f10),_0x5126d2[_0x55feee(0x1d3)]['transactionForceResetInfo']['getToConsole'](),await _0x7a1b5c(_0x35eb89);else return _0x1eb4ca[_0x55feee(0x216)]===_0x5126d2[_0x55feee(0x1d3)][_0x55feee(0x1ed)]['no']?(await _0x310ba2(_0x2b0a85),_0x2b0a85[_0x55feee(0x215)](),_0x1eb4ca):(await _0x2b0a85[_0x55feee(0x21c)](),_0x2b0a85[_0x55feee(0x215)](),_0x5d3dcc['error'](_0x1eb4ca[_0x55feee(0x216)],_0x1eb4ca[_0x55feee(0x225)]));}catch(_0x1de8c0){if(_0x1de8c0[_0x55feee(0x1cd)]&&_0x1de8c0[_0x55feee(0x1cd)][_0x55feee(0x1e4)]('TransientTransactionError')>=0x0){_0x5126d2[_0x55feee(0x1d3)]['transactionConcurrentError']['getToConsole']();if(_0x2b0a85)_0x2b0a85[_0x55feee(0x215)]();await sleep(_0x136f10);if(++_0x5a142c<0x5)return await _0x7a1b5c(_0x35eb89);else return _0x5d3dcc[_0x55feee(0x1f9)](_0x5126d2[_0x55feee(0x1d3)][_0x55feee(0x208)]);}else{_0x5126d2[_0x55feee(0x1d3)][_0x55feee(0x1ea)]['getToConsole']();if(_0x2b0a85)_0x2b0a85['endSession']();return _0x5d3dcc[_0x55feee(0x1f9)](_0x5126d2[_0x55feee(0x1d3)][_0x55feee(0x1ea)]);}}}return await _0x7a1b5c(_0x247e8c);}async function mongoFind(_0xd3acd2,_0x40bc07,{session:session=null,where:where=null,projection:projection=null,sort:sort=null,skip:skip=null,limit:limit=null,isCount:isCount=![]}={}){return await baseCheckAndExecute(async _0xef144d=>{const _0x3141ba=_0xbfb7;let _0x2e1bc1=null,_0x9ceb13=null;if(where===null)where={};if(session!==null)_0x2e1bc1=_0xef144d[_0x3141ba(0x1c5)](where,{'session':session});else _0x2e1bc1=_0xef144d[_0x3141ba(0x1c5)](where);if(projection!==null)_0x2e1bc1=_0x2e1bc1['project'](projection);if(sort!==null)_0x2e1bc1=_0x2e1bc1[_0x3141ba(0x1fa)](sort);if(isCount)_0x9ceb13=await _0xef144d[_0x3141ba(0x1d2)](where);if(skip!==null)_0x2e1bc1=_0x2e1bc1['skip'](skip);if(limit!==null)_0x2e1bc1=_0x2e1bc1['limit'](limit);try{let _0xc26762=await _0x2e1bc1[_0x3141ba(0x1f6)]();return await _0x2e1bc1[_0x3141ba(0x227)](),_0x5d3dcc[_0x3141ba(0x1f5)]({'sender':_0x3141ba(0x1c5),'result':_0xc26762,'count':_0x9ceb13});}catch(_0x528b80){return _0x5d3dcc['error'](_0x5126d2[_0x3141ba(0x1d3)][_0x3141ba(0x1d6)]);}},_0xd3acd2,_0x40bc07);}async function mongoFindOne(_0x1604d9,_0xd4dd9b,{session:session=null,where:where=null,projection:projection=null,sort:sort=null}={}){return await baseCheckAndExecute(async _0x11f96c=>{const _0xbe56d0=_0xbfb7;let _0x348a62={};if(where===null)where={};if(session!==null)_0x348a62[_0xbe56d0(0x20d)]=session;if(projection!==null)_0x348a62[_0xbe56d0(0x21f)]=projection;if(sort!==null)_0x348a62[_0xbe56d0(0x1fa)]=sort;try{let _0x3c747d=await _0x11f96c[_0xbe56d0(0x1db)](where,_0x348a62);return _0x5d3dcc[_0xbe56d0(0x1f5)]({'sender':_0xbe56d0(0x1db),'result':_0x3c747d});}catch(_0x58e6d3){return _0x5d3dcc[_0xbe56d0(0x1f9)](_0x5126d2[_0xbe56d0(0x1d3)][_0xbe56d0(0x1d6)]);}},_0x1604d9,_0xd4dd9b);}async function mongoInsertOne(_0x4c3ec3,_0x39b07b,_0xbda740,{session:session=null}={}){return await baseCheckAndExecute(async(_0x45cf96,{isModel:_0x530489})=>{const _0x3bcd4e=_0xbfb7;if(!_0x499980[_0x3bcd4e(0x1d0)](_0xbda740))return _0x5d3dcc[_0x3bcd4e(0x1f9)](_0x5126d2['origin'][_0x3bcd4e(0x1be)]);if(_0x530489){_0xbda740=_0x39b07b[_0x3bcd4e(0x229)](_0xbda740,{'checkModelMode':_0x39b07b[_0x3bcd4e(0x1bf)][_0x3bcd4e(0x1d9)],'checkValueMode':_0x39b07b[_0x3bcd4e(0x1ca)][_0x3bcd4e(0x1df)]});if(_0xbda740[_0x3bcd4e(0x1ff)])return _0x5d3dcc[_0x3bcd4e(0x1f9)](_0x5126d2['origin'][_0x3bcd4e(0x1be)]);}if(_0xbda740[PK])delete _0xbda740[PK];let _0x5a87cb={};if(session!==null)_0x5a87cb={'session':session};try{let _0x4cad4f=await _0x45cf96[_0x3bcd4e(0x1e1)](_0xbda740,_0x5a87cb);return _0x5d3dcc[_0x3bcd4e(0x1cb)](_0x4cad4f);}catch(_0x1f598c){return _0x5d3dcc['error'](_0x5126d2[_0x3bcd4e(0x1d3)][_0x3bcd4e(0x1d6)]);}},_0x4c3ec3,_0x39b07b);}async function mongoInsertMany(_0x20de25,_0x10eee3,_0x1cd301,{session:session=null}={}){return await baseCheckAndExecute(async(_0x343ba1,{isModel:_0xc73e9d})=>{const _0x52d5a4=_0xbfb7;if(!_0x499980[_0x52d5a4(0x1c4)](_0x1cd301))return _0x5d3dcc['error'](_0x5126d2[_0x52d5a4(0x1d3)][_0x52d5a4(0x1be)]);for(var _0x42f3ae in _0x1cd301){if(!_0x499980[_0x52d5a4(0x1d0)](_0x1cd301[_0x42f3ae]))return _0x5d3dcc[_0x52d5a4(0x1f9)](_0x5126d2['origin'][_0x52d5a4(0x1be)]);if(_0xc73e9d){_0x1cd301[_0x42f3ae]=_0x10eee3[_0x52d5a4(0x229)](_0x1cd301[_0x42f3ae],{'checkModelMode':_0x10eee3[_0x52d5a4(0x1bf)][_0x52d5a4(0x1d9)],'checkValueMode':_0x10eee3['checkValueMode'][_0x52d5a4(0x1df)]});if(_0x1cd301[_0x42f3ae][_0x52d5a4(0x1ff)])return _0x5d3dcc[_0x52d5a4(0x1f9)](_0x5126d2[_0x52d5a4(0x1d3)][_0x52d5a4(0x1be)]);}if(_0x1cd301[_0x42f3ae][PK])delete _0x1cd301[_0x42f3ae][PK];}let _0x1abf48={};if(session!==null)_0x1abf48={'session':session};try{let _0x2e1dd4=await _0x343ba1[_0x52d5a4(0x1f2)](_0x1cd301,_0x1abf48);return _0x5d3dcc[_0x52d5a4(0x1cb)](_0x2e1dd4);}catch(_0x17bacb){return _0x5d3dcc[_0x52d5a4(0x1f9)](_0x5126d2[_0x52d5a4(0x1d3)][_0x52d5a4(0x1d6)]);}},_0x20de25,_0x10eee3);}async function mongoUpdate(_0x260095,_0x18c83d,{$set:$set=null,$inc:$inc=null,$min:$min=null,$max:$max=null,$mul:$mul=null,$setOnInsert:$setOnInsert=null,$unset:$unset=null,$rename:$rename=null,$currentDate:$currentDate=null,$addToSet:$addToSet=null,$pop:$pop=null,$pull:$pull=null,$pullAll:$pullAll=null,$push:$push=null},{session:session=null,where:where=null,upsert:upsert=![],multi:multi=![]}={}){return await baseCheckAndExecute(async(_0x4c28d1,{isModel:_0xee1759})=>{const _0x55ec51=_0xbfb7;if($set===null&&$setOnInsert===null&&$inc===null&&$min===null&&$max===null&&$mul===null&&$unset===null&&$rename===null&&$currentDate===null&&$addToSet===null&&$pop===null&&$pull===null&&$pullAll===null&&$push===null)throw new Error(_0x55ec51(0x22a));if(_0xee1759&&($setOnInsert!==null||$unset!==null||$rename!==null))throw new Error(_0x55ec51(0x209));if($set!==null&&!_0x499980[_0x55ec51(0x1d0)]($set)||$inc!==null&&!_0x499980['isObject']($inc)||$min!==null&&!_0x499980[_0x55ec51(0x1d0)]($min)||$max!==null&&!_0x499980[_0x55ec51(0x1d0)]($max)||$mul!==null&&!_0x499980[_0x55ec51(0x1d0)]($mul)||$setOnInsert!==null&&!_0x499980[_0x55ec51(0x1d0)]($setOnInsert)||$unset!==null&&!_0x499980[_0x55ec51(0x1d0)]($unset)||$rename!==null&&!_0x499980[_0x55ec51(0x1d0)]($rename)||$currentDate!==null&&!_0x499980[_0x55ec51(0x1d0)]($currentDate)||$addToSet!==null&&!_0x499980['isObject']($addToSet)||$pop!==null&&!_0x499980[_0x55ec51(0x1d0)]($pop)||$pull!==null&&!_0x499980[_0x55ec51(0x1d0)]($pull)||$pullAll!==null&&!_0x499980[_0x55ec51(0x1d0)]($pullAll)||$push!==null&&!_0x499980[_0x55ec51(0x1d0)]($push))return MongoPlus[_0x55ec51(0x217)][_0x55ec51(0x1f9)](_0x5126d2[_0x55ec51(0x1d3)]['mongodbOperatorValueTypeError']);let _0xc4cb5d=![];if($inc!==null)_0xc4cb5d=!checkOperatorInfoIsDigit($inc,_0xee1759?_0x18c83d:null);if($min!==null&&!_0xc4cb5d)_0xc4cb5d=!checkOperatorInfoIsDigit($inc,_0xee1759?_0x18c83d:null);if($max!==null&&!_0xc4cb5d)_0xc4cb5d=!checkOperatorInfoIsDigit($inc,_0xee1759?_0x18c83d:null);if($mul!==null&&!_0xc4cb5d)_0xc4cb5d=!checkOperatorInfoIsDigit($inc,_0xee1759?_0x18c83d:null);if(_0xee1759&&!_0xc4cb5d){if($addToSet!==null&&!_0xc4cb5d)_0xc4cb5d=!checkOperatorInfoIsArray($addToSet,_0x18c83d);if($pop!==null&&!_0xc4cb5d)_0xc4cb5d=!checkOperatorInfoIsArray($pop,_0x18c83d);if($pull!==null&&!_0xc4cb5d)_0xc4cb5d=!checkOperatorInfoIsArray($pull,_0x18c83d);if($pullAll!==null&&!_0xc4cb5d)_0xc4cb5d=!checkOperatorInfoIsArray($pullAll,_0x18c83d);if($push!==null&&!_0xc4cb5d)_0xc4cb5d=!checkOperatorInfoIsArray($push,_0x18c83d);}if(_0xc4cb5d)return MongoPlus['result'][_0x55ec51(0x1f9)](_0x5126d2[_0x55ec51(0x1d3)][_0x55ec51(0x219)]);if(where===null)where={};let _0x272200={};if($set!==null)_0x272200[_0x55ec51(0x203)]=$set;if($inc!==null)_0x272200[_0x55ec51(0x1fc)]=$inc;if($min!==null)_0x272200[_0x55ec51(0x20e)]=$min;if($max!==null)_0x272200[_0x55ec51(0x201)]=$max;if($mul!==null)_0x272200[_0x55ec51(0x1de)]=$mul;if($setOnInsert!==null)_0x272200['$setOnInsert']=$setOnInsert;if($unset!==null)_0x272200[_0x55ec51(0x1e7)]=$unset;if($rename!==null)_0x272200[_0x55ec51(0x1bd)]=$rename;if($currentDate!==null)_0x272200[_0x55ec51(0x1c0)]=$currentDate;if($addToSet!==null)_0x272200[_0x55ec51(0x1fb)]=$addToSet;if($pop!==null)_0x272200[_0x55ec51(0x211)]=$pop;if($pull!==null)_0x272200[_0x55ec51(0x226)]=$pull;if($pullAll!==null)_0x272200[_0x55ec51(0x1d8)]=$pullAll;if($push!==null)_0x272200[_0x55ec51(0x204)]=$push;let _0x392996={};if(session!==null)_0x392996[_0x55ec51(0x20d)]=session;if(upsert!==null)_0x392996[_0x55ec51(0x1ec)]=upsert;try{let _0x16c9c6=await _0x4c28d1[multi?_0x55ec51(0x1eb):_0x55ec51(0x202)](where,_0x272200,_0x392996);return _0x5d3dcc[_0x55ec51(0x1e0)](_0x16c9c6);}catch(_0xa21445){return _0x5d3dcc[_0x55ec51(0x1f9)](_0x5126d2[_0x55ec51(0x1d3)][_0x55ec51(0x1d6)]);}},_0x260095,_0x18c83d);}async function mongoDelete(_0x4bf59d,_0x46528c,{session:session=null,where:where=null,multi:multi=![]}={}){return await baseCheckAndExecute(async _0x46f1ba=>{const _0x1d02f5=_0xbfb7;let _0x473f22={},_0x397f1a={};if(session!==null)_0x473f22[_0x1d02f5(0x20d)]=session;if(where!==null)_0x397f1a=where;try{let _0x31e3b8=await _0x46f1ba[multi?'deleteMany':'deleteOne'](_0x397f1a,_0x473f22);return _0x5d3dcc[_0x1d02f5(0x21b)](_0x31e3b8);}catch(_0x1b2633){return _0x5d3dcc['error'](_0x5126d2['origin'][_0x1d02f5(0x1d6)]);}},_0x4bf59d,_0x46528c);}async function mongoFindOneAndUpdate(_0x5913af,_0x7c73d0,{$set:$set=null,$inc:$inc=null,$min:$min=null,$max:$max=null,$mul:$mul=null,$setOnInsert:$setOnInsert=null,$unset:$unset=null,$rename:$rename=null,$currentDate:$currentDate=null,$addToSet:$addToSet=null,$pop:$pop=null,$pull:$pull=null,$pullAll:$pullAll=null,$push:$push=null},{session:session=null,where:where=null,projection:projection=null,sort:sort=null,upsert:upsert=![],isOriginal:isOriginal=!![]}={}){return await baseCheckAndExecute(async(_0x2e3c10,{isModel:_0x2330b9})=>{const _0x44240e=_0xbfb7;if($set===null&&$setOnInsert===null&&$inc===null&&$min===null&&$max===null&&$mul===null&&$unset===null&&$rename===null&&$currentDate===null&&$addToSet===null&&$pop===null&&$pull===null&&$pullAll===null&&$push===null)throw new Error(_0x44240e(0x22a));if(_0x2330b9&&($setOnInsert!==null||$unset!==null||$rename!==null))throw new Error(_0x44240e(0x209));if($set!==null&&!_0x499980[_0x44240e(0x1d0)]($set)||$inc!==null&&!_0x499980[_0x44240e(0x1d0)]($inc)||$min!==null&&!_0x499980['isObject']($min)||$max!==null&&!_0x499980[_0x44240e(0x1d0)]($max)||$mul!==null&&!_0x499980['isObject']($mul)||$setOnInsert!==null&&!_0x499980[_0x44240e(0x1d0)]($setOnInsert)||$unset!==null&&!_0x499980[_0x44240e(0x1d0)]($unset)||$rename!==null&&!_0x499980[_0x44240e(0x1d0)]($rename)||$currentDate!==null&&!_0x499980['isObject']($currentDate)||$addToSet!==null&&!_0x499980[_0x44240e(0x1d0)]($addToSet)||$pop!==null&&!_0x499980[_0x44240e(0x1d0)]($pop)||$pull!==null&&!_0x499980['isObject']($pull)||$pullAll!==null&&!_0x499980[_0x44240e(0x1d0)]($pullAll)||$push!==null&&!_0x499980[_0x44240e(0x1d0)]($push))return MongoPlus[_0x44240e(0x217)]['error'](_0x5126d2['origin'][_0x44240e(0x1c2)]);let _0x56ed14=![];if($inc!==null)_0x56ed14=!checkOperatorInfoIsDigit($inc,_0x2330b9?_0x7c73d0:null);if($min!==null&&!_0x56ed14)_0x56ed14=!checkOperatorInfoIsDigit($inc,_0x2330b9?_0x7c73d0:null);if($max!==null&&!_0x56ed14)_0x56ed14=!checkOperatorInfoIsDigit($inc,_0x2330b9?_0x7c73d0:null);if($mul!==null&&!_0x56ed14)_0x56ed14=!checkOperatorInfoIsDigit($inc,_0x2330b9?_0x7c73d0:null);if(_0x2330b9&&!_0x56ed14){if($addToSet!==null&&!_0x56ed14)_0x56ed14=!checkOperatorInfoIsArray($addToSet,_0x7c73d0);if($pop!==null&&!_0x56ed14)_0x56ed14=!checkOperatorInfoIsArray($pop,_0x7c73d0);if($pull!==null&&!_0x56ed14)_0x56ed14=!checkOperatorInfoIsArray($pull,_0x7c73d0);if($pullAll!==null&&!_0x56ed14)_0x56ed14=!checkOperatorInfoIsArray($pullAll,_0x7c73d0);if($push!==null&&!_0x56ed14)_0x56ed14=!checkOperatorInfoIsArray($push,_0x7c73d0);}if(_0x56ed14)return MongoPlus[_0x44240e(0x217)][_0x44240e(0x1f9)](_0x5126d2[_0x44240e(0x1d3)][_0x44240e(0x219)]);if(where===null)where={};let _0x58507d={};if($set!==null)_0x58507d[_0x44240e(0x203)]=$set;if($inc!==null)_0x58507d[_0x44240e(0x1fc)]=$inc;if($min!==null)_0x58507d['$min']=$min;if($max!==null)_0x58507d[_0x44240e(0x201)]=$max;if($mul!==null)_0x58507d[_0x44240e(0x1de)]=$mul;if($setOnInsert!==null)_0x58507d[_0x44240e(0x1c7)]=$setOnInsert;if($unset!==null)_0x58507d[_0x44240e(0x1e7)]=$unset;if($rename!==null)_0x58507d[_0x44240e(0x1bd)]=$rename;if($currentDate!==null)_0x58507d['$currentDate']=$currentDate;if($addToSet!==null)_0x58507d[_0x44240e(0x1fb)]=$addToSet;if($pop!==null)_0x58507d[_0x44240e(0x211)]=$pop;if($pull!==null)_0x58507d[_0x44240e(0x226)]=$pull;if($pullAll!==null)_0x58507d[_0x44240e(0x1d8)]=$pullAll;if($push!==null)_0x58507d[_0x44240e(0x204)]=$push;let _0x4f7ee6={};_0x4f7ee6[_0x44240e(0x220)]=isOriginal;if(session!==null)_0x4f7ee6[_0x44240e(0x20d)]=session;if(projection!==null)_0x4f7ee6[_0x44240e(0x21f)]=projection;if(sort!==null)_0x4f7ee6[_0x44240e(0x1fa)]=sort;if(upsert!==null)_0x4f7ee6[_0x44240e(0x1ec)]=upsert;try{let _0x11aaa7=await _0x2e3c10['findOneAndUpdate'](where,_0x58507d,_0x4f7ee6);return _0x5d3dcc[_0x44240e(0x1f1)](_0x11aaa7,'findOneAndUpdate');}catch(_0x4b234d){return _0x5d3dcc['error'](_0x5126d2[_0x44240e(0x1d3)]['mongodbBizLogicError']);}},_0x5913af,_0x7c73d0);}async function mongoFindOneAndDelete(_0x440db5,_0x12ee05,{session:session=null,where:where=null,projection:projection=null,sort:sort=null,isOriginal:isOriginal=!![]}={}){return await baseCheckAndExecute(async _0x17a90f=>{const _0x2d2f5f=_0xbfb7;let _0x361a06={};_0x361a06[_0x2d2f5f(0x220)]=isOriginal;if(session!==null)_0x361a06[_0x2d2f5f(0x20d)]=session;if(projection!==null)_0x361a06[_0x2d2f5f(0x21f)]=projection;if(sort!==null)_0x361a06[_0x2d2f5f(0x1fa)]=sort;let _0x583624={},_0x121cf6={};if(session!==null)_0x583624[_0x2d2f5f(0x20d)]=session;if(where!==null)_0x121cf6=where;try{let _0x258e07=await _0x17a90f[_0x2d2f5f(0x1f0)](_0x121cf6,_0x583624);return _0x5d3dcc[_0x2d2f5f(0x1f1)](_0x258e07,'findOneAndDelete');}catch(_0x488686){return _0x5d3dcc['error'](_0x5126d2[_0x2d2f5f(0x1d3)][_0x2d2f5f(0x1d6)]);}},_0x440db5,_0x12ee05);}class MongoPlus{constructor(_0x3f2b3e){const _0x3bbf1e=_0x232ad3;let _0x5b8d8d=_0x3f2b3e[_0x3bbf1e(0x1d1)],_0x577b14=mongoURLCreater(_0x3f2b3e[_0x3bbf1e(0x1fd)],_0x3f2b3e[_0x3bbf1e(0x1e5)],_0x3f2b3e[_0x3bbf1e(0x1c6)],_0x3f2b3e[_0x3bbf1e(0x1dd)],_0x3f2b3e[_0x3bbf1e(0x224)],_0x3f2b3e[_0x3bbf1e(0x200)]),_0x40b4ba={'useNewUrlParser':!![],'useUnifiedTopology':!![],'poolSize':_0x3f2b3e[_0x3bbf1e(0x21d)],'socketTimeoutMS':_0x3f2b3e[_0x3bbf1e(0x1da)]},_0x584235=null;this[_0x3bbf1e(0x20f)]=function(){return _0x584235;},this[_0x3bbf1e(0x223)]=async function(){return _0x584235=await mongoConnect(_0x5b8d8d,_0x577b14,_0x40b4ba),_0x584235;},this[_0x3bbf1e(0x1e3)]=async function(_0x13c6e7){const _0x3f5765=_0x3bbf1e;return await transaction(_0x584235,_0x13c6e7,_0x3f2b3e[_0x3f5765(0x1c8)]);},this[_0x3bbf1e(0x1c5)]=async function(_0x10645d,{session:session=null,where:where=null,project:project=null,sort:sort=null,skip:skip=null,limit:limit=null,isCount:isCount=![]}={}){return await mongoFind(_0x584235,_0x10645d,{'session':session,'where':where,'project':project,'sort':sort,'skip':skip,'limit':limit,'isCount':isCount});},this['findOne']=async function(_0x438615,{session:session=null,where:where=null,project:project=![],sort:sort=null}={}){return await mongoFindOne(_0x584235,_0x438615,{'session':session,'where':where,'project':project,'sort':sort});},this[_0x3bbf1e(0x1e1)]=async function(_0x12f8e9,_0x30811a,{session:session=null}={}){return await mongoInsertOne(_0x584235,_0x12f8e9,_0x30811a,{'session':session});},this[_0x3bbf1e(0x1f2)]=async function(_0x42ae70,_0x3dee04,{session:session=null}={}){return await mongoInsertMany(_0x584235,_0x42ae70,_0x3dee04,{'session':session});},this[_0x3bbf1e(0x202)]=async function(_0xa18b8,{$set:$set=null,$inc:$inc=null,$min:$min=null,$max:$max=null,$mul:$mul=null,$setOnInsert:$setOnInsert=null,$unset:$unset=null,$rename:$rename=null,$currentDate:$currentDate=null,$addToSet:$addToSet=null,$pop:$pop=null,$pull:$pull=null,$pullAll:$pullAll=null,$push:$push=null},{session:session=null,where:where=null,upsert:upsert=![]}={}){return await mongoUpdate(_0x584235,_0xa18b8,{'$set':$set,'$inc':$inc,'$min':$min,'$max':$max,'$mul':$mul,'$setOnInsert':$setOnInsert,'$unset':$unset,'$rename':$rename,'$currentDate':$currentDate,'$addToSet':$addToSet,'$pop':$pop,'$pull':$pull,'$pullAll':$pullAll,'$push':$push},{'session':session,'where':where,'upsert':upsert,'multi':![]});},this['updateMany']=async function(_0x38a8a0,{$set:$set=null,$inc:$inc=null,$min:$min=null,$max:$max=null,$mul:$mul=null,$setOnInsert:$setOnInsert=null,$unset:$unset=null,$rename:$rename=null,$currentDate:$currentDate=null,$addToSet:$addToSet=null,$pop:$pop=null,$pull:$pull=null,$pullAll:$pullAll=null,$push:$push=null},{session:session=null,where:where=null,upsert:upsert=![]}={}){return await mongoUpdate(_0x584235,_0x38a8a0,{'$set':$set,'$inc':$inc,'$min':$min,'$max':$max,'$mul':$mul,'$setOnInsert':$setOnInsert,'$unset':$unset,'$rename':$rename,'$currentDate':$currentDate,'$addToSet':$addToSet,'$pop':$pop,'$pull':$pull,'$pullAll':$pullAll,'$push':$push},{'session':session,'where':where,'upsert':upsert,'multi':!![]});},this['deleteOne']=async function(_0x5a8e45,{session:session=null,where:where=null}={}){return await mongoDelete(_0x584235,_0x5a8e45,{'session':session,'where':where,'multi':![]});},this[_0x3bbf1e(0x228)]=async function(_0x58bd6b,{session:session=null,where:where=null}={}){return await mongoDelete(_0x584235,_0x58bd6b,{'session':session,'where':where,'multi':!![]});},this[_0x3bbf1e(0x1e2)]=async function(_0x52bfce,{$set:$set=null,$inc:$inc=null,$min:$min=null,$max:$max=null,$mul:$mul=null,$setOnInsert:$setOnInsert=null,$unset:$unset=null,$rename:$rename=null,$currentDate:$currentDate=null,$addToSet:$addToSet=null,$pop:$pop=null,$pull:$pull=null,$pullAll:$pullAll=null,$push:$push=null},{session:session=null,where:where=null,projection:projection=null,sort:sort=null,upsert:upsert=![],isOriginal:isOriginal=!![]}={}){return await mongoFindOneAndUpdate(_0x584235,_0x52bfce,{'$set':$set,'$inc':$inc,'$min':$min,'$max':$max,'$mul':$mul,'$setOnInsert':$setOnInsert,'$unset':$unset,'$rename':$rename,'$currentDate':$currentDate,'$addToSet':$addToSet,'$pop':$pop,'$pull':$pull,'$pullAll':$pullAll,'$push':$push},{'session':session,'where':where,'upsert':upsert,'projection':projection,'sort':sort,'isOriginal':isOriginal});},this[_0x3bbf1e(0x1f0)]=async function(_0x3c691d,{session:session=null,where:where=null,projection:projection=null,sort:sort=null,isOriginal:isOriginal=!![]}={}){return await mongoFindOneAndDelete(_0x584235,_0x3c691d,{'session':session,'where':where,'projection':projection,'sort':sort,'isOriginal':isOriginal});};}}MongoPlus['type']={'String':String,'Number':Number,'Boolean':Boolean,'Date':Date,'Array':Array,'Object':Object,'ObjectId':_0x524985['ObjectId'],'Decimal128':_0x524985['Decimal128'],'Int32':_0x524985[_0x232ad3(0x1bc)],'Long':_0x524985[_0x232ad3(0x21a)]},MongoPlus[_0x232ad3(0x217)]=_0x5d3dcc;export default MongoPlus;